$.fn.dyForm=function(o,r){form=this,debug=!1,$(form).on("submit",function(){return $(".black").show(),data=$(this).serialize(),url=$(this).attr("action"),typ=$(this).attr("method"),void 0==typ&&(typ="GET"),void 0==url&&(url=window.location.href),debug&&(console.log("AJAX REQEUST"),console.log(typ+": "+url),console.log(data)),$.ajax({method:typ,url:url,data:data}).done(function(r,e,t){if($(".black").hide(),void 0==o){var n=!1;try{n=$.parseJSON(r)}catch(a){}n===!1?$.fn.dyForm.alert("OK",r,"success"):$.fn.dyForm.jsonParse(n)}else o(r)}).error(function(o){$(".black").hide(),void 0==r?$.fn.dyForm.alert("Error",o.statusText,"error"):r(o.statusText,o)}),!1})},$.fn.dyForm.jsonParse=function(o){console.log(o.status),void 0==o.status&&$.fn.dyForm.alert("Error","No Status in AJAX Return","error"),void 0!=o.msg&&void 0==o.url&&(1==o.status&&(void 0==o.headline&&(o.headline="Done"),$.fn.dyForm.alert(o.headline,o.msg,"success")),0==o.status&&(void 0==o.headline&&(o.headline="Error"),$.fn.dyForm.alert(o.headline,o.msg,"error"))),void 0!=o.msg&&(1==o.status&&(void 0==o.headline&&(o.headline="Done"),$.fn.dyForm.alert(o.headline,o.msg,"success",o.url)),0==o.status&&(void 0==o.headline&&(o.headline="Error"),$.fn.dyForm.alert(o.headline,o.msg,"error",o.url))),void 0==o.msg&&void 0!=o.url&&(window.location.href=o.url),console.log(o.msg)},$.fn.dyForm.alert=function(o,r,e,t){try{swal({title:o,text:r,type:e},function(){void 0!=t&&(window.location.href=t)})}catch(n){void 0!=t?window.location.href=t:alert(o+": "+r)}finally{}};
